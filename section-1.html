<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Project1</title>

<link rel="stylesheet" href="./asset/css/reset.css">
<link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;800&display=swap" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #000;
  color: #fff;
  font-family: 'Pretendard', sans-serif;
  overflow: hidden;
  -webkit-font-smoothing: antialiased;
}

.section-1 {
  height: 100vh;
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: relative;
  padding: 0 24px;
  text-align: center;
}

/* 상단 텍스트 */
.intro-text {
  font-size: 15px;
  font-weight: 400;
  letter-spacing: 0.25em;
  color: rgba(255,255,255,0.5);
  margin-bottom: 60px;
}

/* 메인 숫자 영역 */
.day-wrapper {
  display: flex;
  align-items: baseline;
  justify-content: center;
  gap: 16px;
  margin-bottom: 30px;
}

#day-counter {
  font-family: 'Montserrat', sans-serif;
  font-size: clamp(64px, 18vw, 120px);
  font-weight: 800;
  letter-spacing: -0.03em;
}

.day-text {
  font-family: 'Montserrat', sans-serif;
  font-size: clamp(18px, 4vw, 28px);
  font-weight: 600;
  letter-spacing: 0.3em;
  opacity: 0.8;
}

/* 하단 시간 */
.sub-info {
  margin-top: 20px;
  font-size: 14px;
  letter-spacing: 0.15em;
  opacity: 0.6;
  font-variant-numeric: tabular-nums;
}

/* 스크롤 안내 */
.scroll-guide {
  position: absolute;
  bottom: 8%;
  font-size: 11px;
  letter-spacing: 0.6em;
  opacity: 0;
}
</style>
</head>

<body>

<section class="section-1">
  <p class="intro-text">우리가 함께한 시간</p>

  <div class="day-wrapper">
    <span id="day-counter">0</span>
    <span class="day-text">DAY</span>
  </div>

  <div class="sub-info">
    <span id="live-time">00:00:00.00</span>
  </div>

  <div class="scroll-guide" id="scroll-guide">SCROLL</div>
</section>

<script>
// ===== 기준일 =====
const baseDate = new Date("2019-12-22");

function calculateDay() {
  const now = new Date();
  const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
  const start = new Date(baseDate.getFullYear(), baseDate.getMonth(), baseDate.getDate());
  const diff = today - start;
  return Math.floor(diff / (1000 * 60 * 60 * 24)) + 1;
}

const targetDay = calculateDay();
const dayEl = document.getElementById("day-counter");
const scrollGuide = document.getElementById("scroll-guide");

// ===== 2단계 카운팅 =====
const dayCounter = { value: 0 };
const splitPoint = Math.min(2000, targetDay);

const tl = gsap.timeline();

// 1단계 빠르게
tl.to(dayCounter, {
  value: splitPoint,
  duration: 1.2,
  ease: "power2.out",
  onUpdate() {
    dayEl.textContent = Math.floor(dayCounter.value);
  }
});

// 2단계 감정구간
if (targetDay > splitPoint) {
  tl.to(dayCounter, {
    value: targetDay,
    duration: 1.6,
    ease: "power4.out",
    onUpdate() {
      dayEl.textContent = Math.floor(dayCounter.value);
    }
  });
}

// 마지막 살짝 강조
tl.to(dayEl, {
  scale: 1.08,
  duration: 0.2,
  yoyo: true,
  repeat: 1,
  ease: "power1.inOut"
});

// 스크롤 열기 + 안내 등장
tl.call(() => {
  document.body.style.overflow = "auto";
  gsap.to(scrollGuide, {
    opacity: 0.5,
    duration: 1
  });
});

// ===== 실시간 시계 =====
const timeEl = document.getElementById("live-time");

function updateTime() {
  const now = new Date();
  const h = String(now.getHours()).padStart(2, "0");
  const m = String(now.getMinutes()).padStart(2, "0");
  const s = String(now.getSeconds()).padStart(2, "0");
  const ms = String(Math.floor(now.getMilliseconds()/10)).padStart(2, "0");
  timeEl.textContent = `${h}:${m}:${s}.${ms}`;
}

function tick() {
  updateTime();
  requestAnimationFrame(tick);
}
tick();

</script>

</body>
</html>